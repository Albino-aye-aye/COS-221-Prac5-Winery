<!DOCTYPE html>
<html>
<head>
  <title>User Profile</title>
</head>
<body>
  <h1>User Profile</h1>
  <form>
    <label for="email">Email:</label>
    <input type="email" id="email" required><br>

    <label for="password">Password:</label>
    <input type="password" id="password" required><br>

    <label for="preferredId">Preferred ID:</label>
    <input type="text" id="preferredId" required><br>

    <button type="button" onclick="updateUser()">Update</button>
  </form>

  <script>
    function updateUser() {
      var newEmail = document.getElementById("email").value;
      var newPassword = document.getElementById("password").value;
      var newPreferredId = document.getElementById("preferredId").value;

      // Connect to the database
      var mysql = require('mysql');
      var connection = mysql.createConnection({
        host: '127.0.0.1',
        user: 'root',
        password: '',
        database: 'winedb'
      });

      // Update the user information
      connection.connect(function(err) {
        if (err) {
          console.error('Error connecting to the database: ' + err.stack);
          return;
        }

        // var userId = 1; // Assuming the user ID is 1, you may need to change it accordingly

        var sql = 'UPDATE users SET email = ?, password = ?, preferred_id = ? WHERE id = ?';
        var values = [newEmail, newPassword, newPreferredId, userId];

        connection.query(sql, values, function(err, result) {
          if (err) {
            console.error('Error updating user information: ' + err.stack);
            return;
          }

          console.log('User information updated successfully');
          // Handle success or display a success message to the user
        });

        connection.end();
      });
    }
  </script>
</body>
</html>

